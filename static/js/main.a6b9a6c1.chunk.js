(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/profile-pic.a04d849c.jpg"},20:function(e,t,a){},33:function(e,t,a){e.exports=a(46)},38:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(12),c=a.n(r),o=(a(38),a(5)),s=a(1),m=a(2),i=function(e){return{type:"set_loggedUser",payload:e}},u=function(){var e=Object(m.c)((function(e){return e.isLogged})),t=(Object(m.c)((function(e){return e.loggedUser}))||"username").username,a=Object(m.b)(),n=Object(o.f)();return l.a.createElement("nav",{className:"white"},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement(s.b,{to:e?"/":"/login",className:"brand-logo insta-font left"},"Instagram"),l.a.createElement("ul",{className:"right"},e?l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(s.b,{to:"/"},l.a.createElement("i",{className:"fas fa-home-lg-alt"}))),l.a.createElement("li",null,l.a.createElement("a",{href:"/user/".concat(t)},l.a.createElement("i",{className:"fas fa-2x fa-user-circle"}))),l.a.createElement("li",{onClick:function(){localStorage.clear(),a({type:"set_logged_false"}),a({type:"unset_loggedUser"}),n.push("/login")}},l.a.createElement(s.b,{to:""},l.a.createElement("i",{className:"fas fa-2x fa-sign-out-alt"})))):l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(s.b,{to:"/login"},l.a.createElement("i",{className:"fas fa-2x fa-sign-in-alt"}))),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/signup"},l.a.createElement("i",{className:"fas fa-2x fa-user-plus"})))))))},p=(a(44),a(16)),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_logged_true":return!0;case"set_logged_false":return!1;default:return e}},f=a(29),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HPOSTS":return Object(f.a)(t.payload);case"UPDATE_HPOSTS":return[t.payload].concat(Object(f.a)(e));default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_loggedUser":return t.payload;case"unset_loggedUser":return null;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"update_data":return!e;default:return e}},b=Object(p.b)({isLogged:d,ishposts:g,loggedUser:h,isUpdate:E}),j=a(3),v=a(6),N=a(8),y=a.n(N),O=a(23),w=a.n(O),k=(a(31),function(){var e=Object(m.c)((function(e){return e.isLogged})),t=Object(m.b)(),a=Object(n.useState)({file:null,caption:"",url:""}),r=Object(j.a)(a,2),c=r[0],o=r[1],s=Object(n.useState)(!1),i=Object(j.a)(s,2),u=i[0],p=i[1],d=c.file,f=c.caption,g=c.url,h=Object(n.useState)(null),E=Object(j.a)(h,2),b=E[0],N=E[1],O=Object(n.useState)({x:0,y:30,width:100}),k=Object(j.a)(O,2),S=k[0],C=k[1];var _=function(e){if("caption"===e.target.name){var t=e.target.value;o((function(e){return Object(v.a)(Object(v.a)({},e),{},{caption:t})}))}else if(e.target.files[0]){var a=e.target.files[0],n=URL.createObjectURL(e.target.files[0]);o((function(e){return Object(v.a)(Object(v.a)({},e),{},{file:n,url:a})}))}else o({caption:"",url:"",file:null})};return Object(n.useEffect)((function(){u&&fetch("/createpost",{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({url:g,caption:f})}).then((function(e){return e.json()})).then((function(e){t({type:"UPDATE_HPOSTS",payload:e.post}),e.error?y.a.toast({html:e.error,classes:"red darken-1"}):(o({caption:"",url:"",file:null}),y.a.toast({html:e.message,classes:"blue darken-1"}))})).catch((function(e){return console.log(e)}))}),[u]),l.a.createElement(l.a.Fragment,null,e&&(d?l.a.createElement("form",{method:"post",className:"card-home card",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("file",function(e,t){var a=document.createElement("canvas"),n=e.naturalWidth/e.width,l=e.naturalHeight/e.height;return a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(e,t.x*n,t.y*l,t.width*n,t.height*l,0,0,t.width,t.height),a.toDataURL("image/png")}(b,S)),t.append("upload_preset","".concat("instagram-clone")),t.append("cloud_name","".concat("abhi922")),fetch("".concat("https://api.cloudinary.com/v1_1/abhi922/image/upload"),{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){o((function(t){return Object(v.a)(Object(v.a)({},t),{},{url:e.url})})),p((function(e){return!e}))})).catch((function(e){return console.log(e)}))}},l.a.createElement("i",{onClick:function(){return o({caption:"",url:"",file:null})},className:"fas fa-times fa-2x right"}),l.a.createElement("div",null,l.a.createElement(w.a,{width:"100%",onImageLoaded:N,src:d,crop:S,keepSelection:"true",onChange:C})),l.a.createElement("label",{htmlFor:"file-input"}),l.a.createElement("input",{style:{display:"none"},id:"file-input",type:"file",accept:"image/png, image/jpeg",files:d,onChange:_}),l.a.createElement("div",{className:"post-top-part post-comments"},l.a.createElement("input",{required:!0,style:{marginLeft:"1rem"},value:f,onChange:_,autoFocus:"on",className:"comment-add",autoComplete:"off",type:"text",name:"caption",id:"input_text",maxLength:"100",placeholder:"Add a caption"}),l.a.createElement("button",{style:{marginTop:"-0.5rem"},className:"blue white-text darken-1 post-comment-username"}," Post "))):l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"file-input"},l.a.createElement("div",{style:{display:"absolute",position:"fixed",zIndex:8,bottom:10,right:20}},l.a.createElement("span",{className:"btn-floating btn-large red"},l.a.createElement("i",{className:"fas fa-plus"})))),l.a.createElement("input",{style:{display:"none"},id:"file-input",type:"file",accept:"image/png, image/jpeg",files:d,onChange:_}))))}),S=a(17),C=a.n(S),_=function(e){var t=Object(m.c)((function(e){return e.loggedUser})),r=Object(m.b)(),c=e.post,o=c.url,i=c.caption,u=c._id,p=c.postedBy,d=p._id,f=p.username,g=p.dp,h=c.likes,E=c.comments,b=Object(n.useState)(""),v=Object(j.a)(b,2),N=v[0],O=v[1],w=function(){fetch("/like",{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:u})}).then((function(e){return e.json()})).then((function(e){return r({type:"update_data"})})).catch((function(e){return console.log(e)}))},k=function(){fetch("/post/favPost",{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:u})}).then((function(e){return e.json()})).then((function(e){return r({type:"update_data"})})).catch((function(e){return console.log(e)}))},S=function(e){var a=e.target.parentElement.parentElement.parentElement.id;f===t.username&&fetch("/".concat(a,"/delete"),{method:"get",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){return r({type:"update_data"})})).catch((function(e){return console.log(e)}))},_=function(e){var t=e.target.parentElement.parentElement.parentElement.id,a=e.target.parentElement.parentElement.parentElement.dataset.username,n=String(window.location).split("/",3);alert("Share with your friends -> ".concat(n[0],"//").concat(n[2],"/").concat(a,"/").concat(t))};return l.a.createElement("div",{id:u,"data-username":d,className:"card card-home",style:{marginBottom:"1rem",padding:"0.3rem"}},l.a.createElement("div",{className:"post-top-part"},l.a.createElement(s.b,{to:"/user/".concat(f)},l.a.createElement("img",{style:{marginTop:"0.5rem"},className:"post-profile-pic",width:"40",height:"40",src:g||a(14),alt:"profile pic"})),l.a.createElement("h6",{className:"post-username"},l.a.createElement("strong",null,l.a.createElement(s.b,{to:"/user/".concat(f)},f))),f===t.username?l.a.createElement("i",{onClick:function(e){return y.a.Dropdown.init(e.target).open()},"data-target":"dropdown1",style:{padding:"0.5rem 1rem"},className:"post-top-more fas fa-ellipsis-h"}):l.a.createElement("i",{onClick:function(e){return y.a.Dropdown.init(e.target).open()},"data-target":"dropdown2",style:{padding:"0.5rem 1rem"},className:"post-top-more fas fa-ellipsis-h"}),f===t.username?l.a.createElement("ul",{id:"dropdown1",className:"dropdown-content"},l.a.createElement("li",{className:"dropdown-options",onClick:S},"Delete"),l.a.createElement("li",{className:"dropdown-options",onClick:_},"Share")):l.a.createElement("ul",{id:"dropdown2",className:"dropdown-content"},l.a.createElement("li",{className:"dropdown-options",onClick:_},"Share"))),l.a.createElement("div",{className:"image-card center"},l.a.createElement("img",{onDoubleClick:w,style:C.a&&{cursor:"pointer"},src:o,alt:"img",width:"100%"})),l.a.createElement("div",{className:"post-top-part"},void 0===h.find((function(e){return e.username===t.username}))?l.a.createElement("i",{onClick:w,className:"far fa-heart fa-2x"}):l.a.createElement("i",{onClick:w,className:"fa red-text fa-heart fa-2x","aria-hidden":"true"}),l.a.createElement(s.b,{to:"/".concat(u,"/comments")},l.a.createElement("i",{className:"far fa-comment fa-2x"})),l.a.createElement("i",{"data-id":e.postId,onClick:S,className:"fab fa-telegram-plane fa-2x"}),void 0===t.favPosts.find((function(e){return e===u}))?l.a.createElement("i",{onClick:k,className:"far fa-bookmark fa-2x"}):l.a.createElement("i",{onClick:k,className:"fas fa-bookmark fa-2x"})),l.a.createElement("div",{className:"post-top-part post-like-part"},l.a.createElement("span",{style:{marginLeft:"1rem"}}),l.a.createElement("h6",{className:"post-liked-username"},0===h.length?null:1===h.length?l.a.createElement(l.a.Fragment,null,"Liked by ",l.a.createElement(s.b,{to:"/user/".concat(h[0].username)},l.a.createElement("strong",null,h[0].username))):2===h.length?l.a.createElement(l.a.Fragment,null,"Liked by ",l.a.createElement(s.b,{to:"/user/".concat(h[0].username)},l.a.createElement("strong",null,h[0].username))," and ",l.a.createElement(s.b,{to:"/user/".concat(h[1].username)},l.a.createElement("strong",null,h[1].username))):l.a.createElement(l.a.Fragment,null,"Liked by ",l.a.createElement(s.b,{to:"/user/".concat(h[0].username)},l.a.createElement("strong",null,h[0].username))," and ",l.a.createElement(s.b,{to:"/user/".concat(h[1].username)})," ",l.a.createElement(s.b,{to:"/".concat(u,"/likes")},l.a.createElement("strong",null,h.length-1," others"))))),l.a.createElement("div",{className:"post-top-part post-comments"},l.a.createElement("h6",{className:"post-comment-username",style:{paddingBottom:"0.2rem"}},l.a.createElement(s.b,{to:"/user/".concat(f)},l.a.createElement("strong",null,f))),l.a.createElement("h6",{className:"comment"},i)),E.slice(-1,E.length).map((function(e){return l.a.createElement("div",{key:e.by._id+Math.random(),className:"post-top-part post-comments"},l.a.createElement("h6",{className:"post-comment-username",style:{paddingBottom:"0.2rem"}}," ",l.a.createElement(s.b,{to:"/user/".concat(e.by.username)},l.a.createElement("strong",null,e.by.username))),l.a.createElement("h6",{className:"comment"},e.comment," "))})),E.length>1&&l.a.createElement("div",{style:{marginLeft:"1rem"}},l.a.createElement(s.b,{to:"/".concat(u,"/comments")},l.a.createElement("strong",null,"View all comments."))),l.a.createElement("div",{className:"post-top-part post-comments"},l.a.createElement("img",{className:"post-profile-pic",width:"18",height:"18",src:t.dp||a(14),alt:"profile pic"}),l.a.createElement("form",{className:"comment-add",onSubmit:function(e){e.preventDefault(),fetch("/postcomment",{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:u,comment:N})}).then((function(e){return e.json()})).then((function(e){return r({type:"update_data"})})).catch((function(e){return console.log(e)})),O("")}},l.a.createElement("input",{className:"comment-add",placeholder:"Add a comment",type:"text",name:"comment",value:N,onChange:function(e){var t=e.target.value;O(t)},autoComplete:"off",spellCheck:!1}))))},x=function(){var e=Object(o.g)(),t=e.id,a=e.postId,r=Object(m.c)((function(e){return e.isLogged})),s=Object(m.c)((function(e){return e.isUpdate})),i=Object(m.c)((function(e){return e.ishposts})),u=Object(n.useState)(null),p=Object(j.a)(u,2),d=p[0],f=p[1],g=Object(m.b)(),h=Object(o.f)();return Object(n.useEffect)((function(){r&&c.a.unstable_batchedUpdates((function(){fetch(t?"/user/".concat(t,"/posts"):a?"/myCollections":"/allposts",{method:t?"post":"get",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){!e.error&&e.posts.length>0?(g({type:"SET_HPOSTS",payload:e.posts}),d||f(!0)):h.push("/")})).catch((function(e){return console.log(e)}))}))}),[r,s,t,a]),Object(n.useEffect)((function(){a&&d&&i.find((function(e){return e._id===a}))&&document.getElementById(a).scrollIntoView({behavior:"smooth",block:"start"})}),[d]),l.a.createElement("div",{className:"home card-home"},r&&i&&l.a.createElement("div",{style:{position:"relative"}},!t&&!a&&l.a.createElement(k,null),i.map((function(e){return l.a.createElement(_,{id:e._id,key:e._id,postId:e._id,post:e})}))))},I=function(){var e=Object(o.g)().username,t=Object(o.f)(),r=Object(m.c)((function(e){return e.isLogged})),c=Object(m.c)((function(e){return e.loggedUser})),i=Object(n.useState)(null),u=Object(j.a)(i,2),p=u[0],d=u[1],f=Object(n.useState)(!1),g=Object(j.a)(f,2),h=g[0],E=g[1],b=Object(n.useState)(!1),v=Object(j.a)(b,2),N=v[0],y=v[1],O=0;Object(n.useEffect)((function(){fetch(N?"/retrieve/favposts":"/user/".concat(e),{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.user?d(e.user):t.push("/")})).catch((function(e){return console.log(e)}))}),[h,N]);var w=function(){fetch("/user/".concat(e,"/follow"),{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.error||E((function(e){return!e}))})).catch((function(e){return console.log(e)}))};return r&&p?l.a.createElement("div",{className:"profile card-home home"},l.a.createElement("div",{className:"profile-info row"},l.a.createElement("div",{className:"col s4 left"},l.a.createElement("img",{className:"profile-img",src:p.dp||a(14),alt:"profile-img"})),l.a.createElement("div",{className:"col s8 profile-data"},l.a.createElement("div",{className:"profile-flex"},l.a.createElement("span",{className:"username profile-flex-item"},e)))),l.a.createElement("span",{className:"full-name"},l.a.createElement("strong",null,p.fullname)),l.a.createElement("br",null),l.a.createElement("br",null),p._id!==c._id?p.followers.find((function(e){return e===c._id}))?l.a.createElement("div",{onClick:w,className:"btn grey",style:{width:"100%",borderRadius:"0.3rem"}},l.a.createElement("strong",{className:"white-text"},"Unfollow")):l.a.createElement("div",{onClick:w,className:"btn blue",style:{width:"100%",borderRadius:"0.3rem"}},l.a.createElement("strong",{className:"white-text"},"Follow")):l.a.createElement("div",null,l.a.createElement(s.b,{to:"/profile/edit"},l.a.createElement("div",{className:"btn black",style:{width:"48%",marginLeft:"2%",borderRadius:"0.3rem"}},l.a.createElement("strong",{className:"white-text"},"Edit Profile"))),N?l.a.createElement("div",{className:"btn black",onClick:function(){return y(!1)},style:{width:"48%",marginLeft:"2%",borderRadius:"0.3rem"}},l.a.createElement("strong",{className:"white-text"},"Show My Posts")):l.a.createElement("div",{className:"btn black",onClick:function(){return y(!0)},style:{width:"48%",marginLeft:"2%",borderRadius:"0.3rem"}},l.a.createElement("strong",{className:"white-text"},"Show Favourites"))),l.a.createElement("hr",{className:"hr-profile"}),l.a.createElement("div",{className:"row center"},l.a.createElement("span",{className:"col s4"},l.a.createElement("strong",null,p.posts.length),l.a.createElement("br",null),"posts"),l.a.createElement(s.b,{to:"/followering/".concat(p._id,"/followers")},l.a.createElement("span",{className:"col s4"},l.a.createElement("strong",null,p.followers.length),l.a.createElement("br",null),"followers")),l.a.createElement(s.b,{to:"/followering/".concat(p._id,"/following")},l.a.createElement("span",{className:"col s4"},l.a.createElement("strong",null,p.following.length),l.a.createElement("br",null),"following"))),l.a.createElement("hr",{className:"hr-profile"}),l.a.createElement("div",{className:"my-posts"},N?p.favPosts.slice(0).reverse().map((function(e){return l.a.createElement(s.b,{key:++O,to:{pathname:"/myCollection/".concat(e._id)}},l.a.createElement("img",{style:{width:"100%",height:"8rem"},src:e.url,alt:"posts"}))})):p.posts.slice(0).reverse().map((function(e){return l.a.createElement(s.b,{key:++O,to:{pathname:"/".concat(p._id,"/").concat(e._id)}},l.a.createElement("img",{style:{width:"100%",height:"8rem"},src:e.url,alt:"posts"}))})))):null},L=a(13),T=function(){var e=Object(o.f)(),t=Object(m.b)(),a=Object(m.c)((function(e){return e.isLogged})),r=Object(n.useState)(null),c=Object(j.a)(r,2),u=c[0],p=c[1],d=Object(n.useState)({email:"",password:""}),f=Object(j.a)(d,2),g=f[0],h=f[1],E=g.email,b=g.password,N=function(e){var t=e.target.name,a=e.target.value;h((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},t,a))}))};return Object(n.useEffect)((function(){a?e.push("/"):p(!0)}),[a]),u&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{method:"post",className:"card card-login",onSubmit:function(a){a.preventDefault(),E.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&b.length>3?fetch("/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:E,password:b})}).then((function(e){return e.json()})).then((function(a){a.error?y.a.toast({html:a.error,classes:"red darken-1"}):(h({email:"",password:""}),localStorage.setItem("jwt",a.token),t(i(a.user)),t({type:"set_logged_true"}),e.push("/"),y.a.toast({html:a.message,classes:"blue darken-1"}))})).catch((function(e){return console.log(e)})):y.a.toast({html:"Invalid email or other fields<br>Please check your inputs again.",classes:"red darken-1"})}},l.a.createElement("h2",{className:"insta-font"},"Instagram"),l.a.createElement("input",{type:"email",autoComplete:"off",name:"email",placeholder:"Email",required:!0,value:E,onChange:N}),l.a.createElement("input",{type:"password",name:"password",required:!0,minLength:"4",placeholder:"Password",value:b,onChange:N}),l.a.createElement("br",null),l.a.createElement("button",{className:"btn blue insta-btn"},"Log In"),l.a.createElement("div",{className:"or-container"},l.a.createElement("hr",null),"OR",l.a.createElement("hr",null)),l.a.createElement("br",null),l.a.createElement(s.b,{className:"blue-text  text-darken-4",to:"/Login"},"forgot password ?")),l.a.createElement("div",{className:"card card-login signup-card"},"Don't have an account? ",l.a.createElement(s.b,{className:"blue-text",to:"/Signup"}," Sign up")),l.a.createElement("div",{className:"card card-login signup-card app-card"},l.a.createElement("div",null," Get the app "),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("button",{className:"btn black"},l.a.createElement("i",{className:"fab fa-google-play"}," ")," Google Play"),S.isMobile?l.a.createElement("span",null,l.a.createElement("br",null),l.a.createElement("br",null)):l.a.createElement("span",null,"  "),l.a.createElement("button",{className:"btn black"},l.a.createElement("i",{className:"fab fa-app-store"}," ")," App Store",l.a.createElement("i",{className:"text-transparent"},"ss")))))},U=function(){var e=Object(o.f)(),t=Object(n.useState)({email:"",username:"",password:"",fullname:""}),a=Object(j.a)(t,2),r=a[0],c=a[1],m=r.email,i=r.password,u=r.fullname,p=r.username,d=function(e){var t=e.target.name,a=e.target.value;c((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},t,a))}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{method:"post",className:"card card-login",onSubmit:function(t){t.preventDefault(),m.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&u.length>3&&p.length>3&&i.length>3?fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,fullname:u,password:i,username:p})}).then((function(e){return e.json()})).then((function(t){t.error?y.a.toast({html:t.error,classes:"red darken-1"}):(c({email:"",username:"",password:"",fullname:""}),e.push("/login"),y.a.toast({html:t.message,classes:"blue darken-1"}))})).catch((function(e){return console.log(e)})):y.a.toast({html:"Invalid email or other fields<br>Please check your inputs again.",classes:"red darken-1"})}},l.a.createElement("h2",{className:"insta-font"},"Instagram"),l.a.createElement("h5",{className:"grey-text  text-darken-1"},"Sign up to see photos and videos from your friends."),l.a.createElement("input",{type:"email",autoComplete:"off",name:"email",placeholder:"Email",required:!0,value:m,onChange:d}),l.a.createElement("input",{type:"text",autoComplete:"off",name:"fullname",placeholder:"Full Name",required:!0,minLength:"4",value:u,onChange:d}),l.a.createElement("input",{type:"text",autoComplete:"off",required:!0,minLength:"4",name:"username",placeholder:"Username",value:p,onChange:d}),l.a.createElement("input",{type:"password",name:"password",required:!0,minLength:"4",placeholder:"Password",value:i,onChange:d}),l.a.createElement("br",null),l.a.createElement("button",{className:"btn blue insta-btn"},"Sign Up")),l.a.createElement("div",{className:"card card-login signup-card"},"Have an account?  ",l.a.createElement(s.b,{className:"blue-text",to:"/Login"}," Log in")),l.a.createElement("div",{className:"card card-login signup-card app-card"},l.a.createElement("div",null," Get the app "),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("button",{className:"btn black"},l.a.createElement("i",{className:"fab fa-google-play"}," ")," Google Play"),S.isMobile?l.a.createElement("span",null,l.a.createElement("br",null),l.a.createElement("br",null)):l.a.createElement("span",null,"  "),l.a.createElement("button",{className:"btn black"},l.a.createElement("i",{className:"fab fa-app-store"}," ")," App Store",l.a.createElement("i",{className:"text-transparent"},"ss")))))},B=(a(20),function(){var e=Object(o.g)().postId,t=Object(o.f)(),r=Object(n.useState)(null),c=Object(j.a)(r,2),i=c[0],u=c[1],p=Object(n.useState)(""),d=Object(j.a)(p,2),f=d[0],g=d[1],h=Object(n.useState)(!1),E=Object(j.a)(h,2),b=E[0],v=E[1],N=Object(m.c)((function(e){return e.loggedUser})),y=N.dp,O=N.username;Object(n.useEffect)((function(){fetch("/".concat(e,"/comments"),{method:"get",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.error||u(e.comments.comments)})).catch((function(e){return console.log(e)}))}),[b]);return l.a.createElement("div",{className:"card card-home comment-card"},i&&l.a.createElement("div",{className:"mainDiv"},l.a.createElement("div",{className:"post-top-part"},l.a.createElement("i",{onClick:t.goBack,style:{marginTop:"0.4rem"},className:"fas fa-chevron-left fa-2x"}),l.a.createElement("i",{style:{marginLeft:"auto"},className:"fa-2x"},"Comments"),l.a.createElement("i",{style:{marginLeft:"auto"},className:"fab fa-telegram-plane fa-2x"})),l.a.createElement("hr",null),l.a.createElement("div",{className:"commentsDiv"},i.map((function(e){return l.a.createElement("div",{key:e._id,className:"post-top-part post-comments",style:{padding:"5px"}},l.a.createElement(s.b,{to:"/user/".concat(e.by.username)},l.a.createElement("img",{style:{marginTop:"-5px",marginRight:"-5px"},className:"post-profile-pic",width:"35",height:"35",src:e.by.dp||a(14),alt:"profile pic"})),l.a.createElement("h6",{className:"post-comment-username"},l.a.createElement(s.b,{to:"/user/".concat(e.by.username)},l.a.createElement("strong",null,e.by.username))),l.a.createElement("h6",{className:"comment"},e.comment," "))}))),l.a.createElement("div",{className:"post-top-part post-comments",style:{position:"absolute",bottom:10}},l.a.createElement(s.b,{to:"/user/".concat(O)},l.a.createElement("img",{className:"post-profile-pic newCommentImg",width:"35",height:"35",src:y||a(14),alt:"profile pic"})),l.a.createElement("form",{className:"comment-add",onSubmit:function(t){t.preventDefault(),fetch("/postcomment",{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e,comment:f})}).then((function(e){return e.json()})).then((function(e){return v((function(e){return!e}))})).catch((function(e){return console.log(e)})),g("")}},l.a.createElement("input",{className:"comment-add",placeholder:"Add a comment",type:"text",name:"comment",value:f,onChange:function(e){var t=e.target.value;g(t)},autoComplete:"off",spellCheck:!1})))))}),D=function(){var e=Object(o.f)(),t=Object(o.g)(),r=t.postId,c=t.userId,i=t.task,u=Object(n.useState)(null),p=Object(j.a)(u,2),d=p[0],f=p[1],g=Object(m.c)((function(e){return e.loggedUser})),h=Object(m.c)((function(e){return e.isLogged})),E=Object(n.useState)(!1),b=Object(j.a)(E,2),v=b[0],N=b[1];Object(n.useEffect)((function(){fetch(r?"/".concat(r,"/likes"):"/followersOrFollowings/".concat(c,"/").concat(i),{method:"get",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.likes?f(e.likes.likes):e.followers?f(e.followers.followers):f(e.following.following)})).catch((function(e){return console.log(e)}))}),[v]);var y=function(e){fetch("/user/".concat(e,"/follow"),{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.error||N((function(e){return!e}))})).catch((function(e){return console.log(e)}))};return l.a.createElement("div",{className:"home card card-home lff-card"},h&&d&&l.a.createElement("div",null,l.a.createElement("div",{className:"post-top-part"},l.a.createElement("i",{onClick:e.goBack,style:{marginTop:"0.4rem"},className:"fas fa-chevron-left fa-2x"}),l.a.createElement("i",{style:{marginLeft:"auto"},className:"fa-2x"},r?"Likes":i),l.a.createElement("i",{style:{marginLeft:"auto"}},"   ")),l.a.createElement("hr",null),l.a.createElement("div",{className:"llf-DataDiv"},d.map((function(e){return l.a.createElement("div",{key:e._id,className:"post-top-part post-comments",style:{margin:"1rem 0"}},l.a.createElement(s.b,{to:"/user/".concat(e.username)},l.a.createElement("img",{className:"llf-img post-profile-pic",width:"50",height:"50",src:e.dp||a(14),alt:"."})),l.a.createElement(s.b,{to:"/user/".concat(e.username)},l.a.createElement("div",{className:"lff-userDetails"},l.a.createElement("h6",{style:{paddingBottom:"0.2rem"},className:"post-comment-username"},l.a.createElement("strong",null,e.username)),l.a.createElement("h6",{className:"post-comment-username"},e.fullname))),e._id!==g._id&&(e.followers.find((function(e){return e===g._id}))?l.a.createElement("div",{onClick:function(t){return y(e.username)},className:"btn grey lff-followBtn"},l.a.createElement("strong",{className:"white-text"},"Unfollow")):l.a.createElement("div",{onClick:function(t){return y(e.username)},className:"btn blue lff-followBtn"},l.a.createElement("strong",{className:"white-text"},"Follow"))))})))))},P=function(){var e=Object(o.f)(),t=Object(m.b)(),r=Object(m.c)((function(e){return e.loggedUser})),c=Object(m.c)((function(e){return e.isLogged})),u=Object(n.useState)({fullname:r.fullname,username:r.username,email:r.email}),p=Object(j.a)(u,2),d=p[0],f=p[1],g=function(e){var t=e.target.name,a=e.target.value;f((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},t,a))}))},h=function(a){a.preventDefault(),fetch("/updateUser",{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({id:r._id,data:d})}).then((function(e){return e.json()})).then((function(a){a.error||(t(i(a.user)),e.goBack())})).catch((function(e){return console.log(e)}))},E=d.fullname,b=d.username,N=d.email;return l.a.createElement("div",{className:"home card card-home",style:{minHeight:"65vh"}},c&&l.a.createElement("div",null,l.a.createElement("form",{onSubmit:h,method:"post"},l.a.createElement("div",{className:"post-top-part"},l.a.createElement("i",{onClick:e.goBack,className:"ep-cancelBtn fas"},"Cancel"),l.a.createElement("i",{className:"fas ep-headerTitle"},"Edit Profile"),l.a.createElement("i",{onClick:h,className:"blue-text text-darken-2 fas ep-doneBtn"},"Done")),l.a.createElement("hr",null),l.a.createElement("div",null,l.a.createElement("img",{style:{marginLeft:"34%"},className:"profile-img",src:r.dp||a(14),alt:"profile-img"})),l.a.createElement("div",{style:{marginLeft:"34%"}},l.a.createElement("strong",null,l.a.createElement(s.b,{to:"/updateProfilePhoto",className:"blue-text text-darken-2"},"Change Profile Photo"))),l.a.createElement("div",{style:{marginTop:"1rem"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"ep-labelDiv col"},"Name"),l.a.createElement("input",{className:"col ep-input",type:"text",spellCheck:"false",autoComplete:"off",id:"fullname",name:"fullname",placeholder:"Name",value:E,onChange:g})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col ep-labelDiv"},"Username"),l.a.createElement("input",{className:"col ep-input",type:"text",spellCheck:"false",autoComplete:"off",id:"username",name:"username",placeholder:"Username",value:b,onChange:g})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col ep-labelDiv"},"Email"),l.a.createElement("input",{className:"col ep-input",type:"email",spellCheck:"false",autoComplete:"off",id:"email",name:"email",placeholder:"Email",value:N,onChange:g}))))))},z=function(){var e=Object(m.b)(),t=Object(o.f)(),a=Object(m.c)((function(e){return e.loggedUser})),r=Object(m.c)((function(e){return e.isLogged})),c=Object(n.useState)(null),s=Object(j.a)(c,2),u=s[0],p=s[1],d=Object(n.useState)(null),f=Object(j.a)(d,2),g=f[0],h=f[1],E=Object(n.useState)(null),b=Object(j.a)(E,2),v=b[0],N=b[1],y=Object(n.useState)({x:0,y:0,width:100,aspect:1}),O=Object(j.a)(y,2),k=O[0],S=O[1];return Object(n.useEffect)((function(){g&&fetch("/updateProfilePhoto",{method:"put",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({dp:g,username:a.username})}).then((function(e){return e.json()})).then((function(a){e(i(a.user)),e({type:"update_data"}),t.goBack()})).catch((function(e){return console.log(e)}))}),[g]),l.a.createElement(l.a.Fragment,null,r&&l.a.createElement("div",{className:"card home card-home"},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"file-input",className:"btn btn-large blue pp-selectBtn"},"Select"),u&&l.a.createElement("span",{style:{marginLeft:"40%"},onClick:function(e){var t=new FormData;t.append("file",function(e,t){var a=document.createElement("canvas"),n=e.naturalWidth/e.width,l=e.naturalHeight/e.height;return a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(e,t.x*n,t.y*l,t.width*n,t.height*l,0,0,t.width,t.height),a.toDataURL("image/png")}(v,k)),t.append("upload_preset","".concat("instagram-clone")),t.append("cloud_name","".concat("abhi922")),fetch("".concat("https://api.cloudinary.com/v1_1/abhi922/image/upload"),{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){h(e.url)})).catch((function(e){return console.log(e)}))},className:"btn btn-large blue pp-selectBtn"},"Upload")),l.a.createElement("input",{style:{display:"none"},id:"file-input",type:"file",accept:"image/png, image/jpeg",files:u,onChange:function(e){var t=e.target.files[0];p(t?URL.createObjectURL(t):null)}})),u&&l.a.createElement("div",null,l.a.createElement(w.a,{onImageLoaded:N,src:u,crop:k,keepSelection:!0,circularCrop:!0,onChange:S}))))},F=function(){var e=Object(m.c)((function(e){return e.isLogged})),t=Object(m.c)((function(e){return e.isUpdate})),a=Object(m.b)();return Object(n.useEffect)((function(){c.a.unstable_batchedUpdates((function(){fetch("/",{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.isLogged&&(a(i(e.user)),a({type:"set_logged_true"})),e.error&&(a({type:"unset_loggedUser"}),a({type:"set_logged_false"}))})).catch((function(e){return console.log(e)}))}))}),[t]),l.a.createElement(o.c,null,e&&l.a.createElement(o.a,{path:"/user/:username"},l.a.createElement(I,null)),e&&l.a.createElement(o.a,{exact:!0,path:"/"},l.a.createElement(x,null)),e&&l.a.createElement(o.a,{exact:!0,path:"/myCollection/:postId"},l.a.createElement(x,null)),e&&l.a.createElement(o.a,{exact:!0,path:"/updateProfilePhoto"},l.a.createElement(z,null)),e&&l.a.createElement(o.a,{path:"/:postId/comments"},l.a.createElement(B,null)),e&&l.a.createElement(o.a,{path:"/:postId/likes"},l.a.createElement(D,null)),e&&l.a.createElement(o.a,{path:"/profile/edit"},l.a.createElement(P,null)),e&&l.a.createElement(o.a,{path:"/followering/:userId/:task"},l.a.createElement(D,null)),e&&l.a.createElement(o.a,{path:"/:id/:postId"},l.a.createElement(x,null)),e&&l.a.createElement(o.a,null,l.a.createElement(x,null)),!1===e&&l.a.createElement(o.a,{path:"/signup"},l.a.createElement(U,null)),!1===e&&l.a.createElement(o.a,null,l.a.createElement(T,null)))},R=Object(p.c)(b,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var A=function(){return l.a.createElement(m.a,{store:R},l.a.createElement(s.a,null,l.a.createElement(u,null),l.a.createElement(F,null)))};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(A,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.a6b9a6c1.chunk.js.map